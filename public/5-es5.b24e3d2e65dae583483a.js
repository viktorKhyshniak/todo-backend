function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function _createClass(t,e,o){return e&&_defineProperties(t.prototype,e),o&&_defineProperties(t,o),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{lCCV:function(t,e,o){"use strict";o.r(e),o.d(e,"TodoModule",(function(){return z}));var n,i,r,a=o("ofXK"),s=o("tyNb"),c=o("XNiG"),u=o("1G5W"),d=o("3Pt+"),l=o("0IaG"),b=o("fXoL"),f=o("kmnG"),m=o("qFsG"),p=o("bTqV"),g=((n=function(){function t(e,o,n){_classCallCheck(this,t),this.fb=e,this.dialogRef=o,this.data=n,this.loginForm=this.fb.group({login:["",d.k.required],password:["",d.k.required]}),this.dialogData=this.data}return _createClass(t,[{key:"onSubmit",value:function(t){this.dialogRef.close(t)}},{key:"ngOnInit",value:function(){}}]),t}()).\u0275fac=function(t){return new(t||n)(b.Nb(d.b),b.Nb(l.d),b.Nb(l.a))},n.\u0275cmp=b.Hb({type:n,selectors:[["app-login-modal"]],decls:11,vars:4,consts:[[3,"formGroup","ngSubmit"],[1,"w-100"],["matInput","","placeholder","min 6","formControlName","login"],["matInput","","placeholder","min 6","type","password","formControlName","password"],["mat-flat-button","","color","primary","type","submit",3,"disabled"]],template:function(t,e){1&t&&(b.Sb(0,"form",0),b.ac("ngSubmit",(function(){return e.onSubmit(e.loginForm.value)})),b.Sb(1,"mat-form-field",1),b.Sb(2,"mat-label"),b.sc(3),b.Rb(),b.Ob(4,"input",2),b.Rb(),b.Sb(5,"mat-form-field",1),b.Sb(6,"mat-label"),b.sc(7,"Password"),b.Rb(),b.Ob(8,"input",3),b.Rb(),b.Sb(9,"button",4),b.sc(10),b.Rb(),b.Rb()),2&t&&(b.fc("formGroup",e.loginForm),b.Bb(3),b.tc(e.dialogData.buttonText),b.Bb(6),b.fc("disabled",e.loginForm.invalid),b.Bb(1),b.uc(" ",e.dialogData.buttonText," "))},directives:[d.l,d.h,d.d,f.a,f.d,m.a,d.a,d.g,d.c,p.a],styles:["form[_ngcontent-%COMP%]{text-align:center}"]}),n),h=o("LzQu"),v=o("tk/3"),I=((i=function(){function t(e){_classCallCheck(this,t),this.http=e}return _createClass(t,[{key:"getTodoList",value:function(){return this.http.get("".concat(h.a.apiUrlConst,"todo"))}},{key:"postTodo",value:function(t){return this.http.post("".concat(h.a.apiUrlConst,"todo"),t)}},{key:"deleteTodo",value:function(t){return this.http.delete("".concat(h.a.apiUrlConst,"todo/").concat(t))}},{key:"putTodo",value:function(t,e){return this.http.put("".concat(h.a.apiUrlConst,"todo/").concat(t),e)}},{key:"getTodoByUserId",value:function(t){return this.http.get("".concat(h.a.apiUrlConst,"todo/").concat(t))}}]),t}()).\u0275fac=function(t){return new(t||i)(b.Wb(v.b))},i.\u0275prov=b.Jb({token:i,factory:i.\u0275fac,providedIn:"root"}),i),S=o("jGGy"),k=o("5eHb"),y=o("STbY"),C=o("NFeN"),T=((r=function(){function t(e){_classCallCheck(this,t),this.fb=e,this.sendFormValue=new b.n,this.form=this.fb.group({todo:[""],status:["active"]})}return _createClass(t,[{key:"ngOnInit",value:function(){this.initForm()}},{key:"submitTodoForm",value:function(){this.sendFormValue.emit(this.form.value),this.initForm()}},{key:"initForm",value:function(){this.form=this.fb.group({todo:[""],status:["active"]})}}]),t}()).\u0275fac=function(t){return new(t||r)(b.Nb(d.b))},r.\u0275cmp=b.Hb({type:r,selectors:[["app-todo-add"]],outputs:{sendFormValue:"sendFormValue"},decls:8,vars:2,consts:[[3,"formGroup","ngSubmit"],["appearance","outline"],["matInput","","placeholder","Read Book","formControlName","todo"],["mat-raised-button","","color","primary",1,"m-1",3,"disabled"]],template:function(t,e){1&t&&(b.Sb(0,"form",0),b.ac("ngSubmit",(function(){return e.submitTodoForm()})),b.Sb(1,"mat-form-field",1),b.Sb(2,"mat-label"),b.sc(3,"Add Todos"),b.Rb(),b.Ob(4,"input",2),b.Rb(),b.Sb(5,"button",3),b.Sb(6,"small"),b.sc(7,"Submit"),b.Rb(),b.Rb(),b.Rb()),2&t&&(b.fc("formGroup",e.form),b.Bb(5),b.fc("disabled",e.form.controls.todo.value&&0===e.form.controls.todo.value.length))},directives:[d.l,d.h,d.d,f.a,f.d,m.a,d.a,d.g,d.c,p.a],styles:["form[_ngcontent-%COMP%]{text-align:center}"]}),r),R=o("wZkO"),O=o("MutI"),w=o("jaxi"),L=o("f0Cb"),U=o("FKr1");function _(t,e){1&t&&(b.Sb(0,"mat-icon"),b.sc(1,"done_outline"),b.Rb())}function M(t,e){if(1&t&&(b.Sb(0,"div",5),b.Sb(1,"span",6),b.rc(2,_,2,0,"mat-icon",7),b.Rb(),b.Sb(3,"span",8),b.sc(4),b.Rb(),b.Rb()),2&t){var o=b.cc();b.Bb(2),b.fc("ngIf",(null==o.todoItem?null:o.todoItem.status)===(null==o.statusConst?null:o.statusConst.complete)),b.Bb(2),b.tc(o.todoItem.todo)}}function F(t,e){if(1&t){var o=b.Tb();b.Sb(0,"form",9),b.ac("click",(function(t){return b.kc(o),b.cc().formChange(t)}))("change",(function(t){return b.kc(o),b.cc().formChange(t)})),b.Sb(1,"mat-form-field",10),b.Sb(2,"mat-label"),b.sc(3,"Edit Todo"),b.Rb(),b.Ob(4,"input",11),b.Rb(),b.Rb()}if(2&t){var n=b.cc();b.fc("formGroup",n.editForm)}}function P(t,e){if(1&t){var o=b.Tb();b.Sb(0,"button",16),b.ac("click",(function(t){b.kc(o);var e=b.cc(2);return e.changeEditMode(t,e.todoItem)})),b.Sb(1,"mat-icon"),b.sc(2,"edit"),b.Rb(),b.Rb()}}function x(t,e){if(1&t){var o=b.Tb();b.Sb(0,"button",16),b.ac("click",(function(t){b.kc(o);var e=b.cc(2);return e.editMode=e.changeMode(t,e.editMode)})),b.Sb(1,"mat-icon"),b.sc(2,"keyboard_return"),b.Rb(),b.Rb()}}function j(t,e){if(1&t){var o=b.Tb();b.Sb(0,"button",17),b.ac("click",(function(t){b.kc(o);var e=b.cc(2);return e.editCurrentItem(t,e.editForm.value)})),b.Sb(1,"mat-icon"),b.sc(2,"save"),b.Rb(),b.Rb()}if(2&t){var n=b.cc(2);b.fc("disabled",n.editForm.invalid)}}function B(t,e){if(1&t){var o=b.Tb();b.Sb(0,"div",12),b.rc(1,P,3,0,"button",13),b.rc(2,x,3,0,"button",13),b.rc(3,j,3,1,"button",14),b.Sb(4,"button",15),b.ac("click",(function(t){b.kc(o);var e=b.cc();return e.deleteCurrentItem(t,e.todoItem._id)})),b.Sb(5,"mat-icon"),b.sc(6,"delete"),b.Rb(),b.Rb(),b.Rb()}if(2&t){var n=b.cc();b.Bb(1),b.fc("ngIf",!n.editMode),b.Bb(1),b.fc("ngIf",n.editMode),b.Bb(1),b.fc("ngIf",n.editMode)}}var N,G=((N=function(){function t(e){_classCallCheck(this,t),this.fb=e,this.deleteItem=new b.n,this.updateItem=new b.n,this.statusChange=new b.n,this.showOptions=!1,this.editMode=!1,this.editForm=this.fb.group({_id:[""],status:["active",d.k.required],todo:["",d.k.required]}),this.statusConst=h.a.todoStatuses}return _createClass(t,[{key:"ngOnInit",value:function(){this.initForm()}},{key:"initForm",value:function(){this.editForm=this.fb.group({_id:[""],status:["active",d.k.required],todo:["",d.k.required]})}},{key:"deleteCurrentItem",value:function(t,e){t.stopPropagation(),this.deleteItem.emit(e)}},{key:"editCurrentItem",value:function(t,e){t.stopPropagation(),this.updateItem.emit(e),this.editMode=this.editMode?this.changeMode(t,this.editMode):this.editMode}},{key:"changeEditMode",value:function(t,e){t.stopPropagation(),this.editMode=this.changeMode(t,this.editMode),this.editForm.patchValue(e)}},{key:"changeMode",value:function(t,e){return t.stopPropagation(),!e}},{key:"changeStatus",value:function(t,e){var o;switch(e){case h.a.todoStatuses.active:o=h.a.todoStatuses.complete;break;case h.a.todoStatuses.complete:o=h.a.todoStatuses.active;break;default:o=h.a.todoStatuses.complete}this.todoItem=Object.assign(Object.assign({},this.todoItem),{status:o}),this.editCurrentItem(t,this.todoItem),this.statusChange.emit()}},{key:"formChange",value:function(t){t.stopPropagation()}}]),t}()).\u0275fac=function(t){return new(t||N)(b.Nb(d.b))},N.\u0275cmp=b.Hb({type:N,selectors:[["app-todo-list-item"]],inputs:{todoItem:"todoItem"},outputs:{deleteItem:"deleteItem",updateItem:"updateItem",statusChange:"statusChange"},decls:6,vars:3,consts:[["matLine","",3,"mouseover","mouseleave","click"],["matLine","","class","d-flex w-50",4,"ngIf"],["matLine","","class","d-flex w-50 end",3,"formGroup","click","change",4,"ngIf"],[1,"w-50"],["class","d-flex end",4,"ngIf"],["matLine","",1,"d-flex","w-50"],[1,"green"],[4,"ngIf"],[1,"todo-name","w-50"],["matLine","",1,"d-flex","w-50","end",3,"formGroup","click","change"],[1,"example-full-width"],["matInput","","placeholder","todo","formControlName","todo"],[1,"d-flex","end"],["mat-icon-button","","color","primary",3,"click",4,"ngIf"],["mat-icon-button","","color","primary",3,"disabled","click",4,"ngIf"],["mat-icon-button","","color","warn",3,"click"],["mat-icon-button","","color","primary",3,"click"],["mat-icon-button","","color","primary",3,"disabled","click"]],template:function(t,e){1&t&&(b.Sb(0,"mat-list-item",0),b.ac("mouseover",(function(){return e.showOptions=!0}))("mouseleave",(function(){return e.showOptions=!1}))("click",(function(t){return e.changeStatus(t,e.todoItem.status)})),b.rc(1,M,5,2,"div",1),b.rc(2,F,5,1,"form",2),b.Sb(3,"div",3),b.rc(4,B,7,3,"div",4),b.Rb(),b.Ob(5,"mat-divider"),b.Rb()),2&t&&(b.Bb(1),b.fc("ngIf",!e.editMode),b.Bb(1),b.fc("ngIf",e.editMode),b.Bb(2),b.fc("ngIf",e.showOptions))},directives:[O.b,U.e,a.j,L.a,C.a,d.l,d.h,d.d,f.a,f.d,m.a,d.a,d.g,d.c,p.a],styles:[".d-flex[_ngcontent-%COMP%]{display:flex!important;justify-content:space-between}.end[_ngcontent-%COMP%]{justify-content:flex-end!important}.mat-list-item[_ngcontent-%COMP%]{height:5rem}.green[_ngcontent-%COMP%]{color:#adff2f}.todo-name[_ngcontent-%COMP%]{align-self:center}"]}),N);function $(t,e){if(1&t){var o=b.Tb();b.Qb(0),b.Sb(1,"app-todo-list-item",6),b.ac("updateItem",(function(t){return b.kc(o),b.cc().update(t)}))("deleteItem",(function(t){return b.kc(o),b.cc().delete(t)}))("statusChange",(function(t){return b.kc(o),b.cc().filterTodos(t)})),b.Rb(),b.Pb()}if(2&t){var n=e.$implicit;b.Bb(1),b.fc("todoItem",n)}}var V,D=((V=function(){function t(){_classCallCheck(this,t),this.deleteItem=new b.n,this.updateItem=new b.n,this.lastPlace="all"}return _createClass(t,[{key:"ngOnInit",value:function(){}},{key:"delete",value:function(t){this.deleteItem.emit(t)}},{key:"update",value:function(t){this.updateItem.emit(t)}},{key:"filterTodos",value:function(t){var e=t?t.toString():this.lastPlace;switch(e){case h.a.todoStatuses.active:case h.a.todoStatuses.complete:this.listOfTodo=this.allTodo.filter((function(t){return t.status===e}));break;default:this.listOfTodo=this.allTodo}this.lastPlace=e}},{key:"todoList",set:function(t){t&&(this.allTodo=t,this.filterTodos())}}]),t}()).\u0275fac=function(t){return new(t||V)},V.\u0275cmp=b.Hb({type:V,selectors:[["app-todo-list"]],inputs:{todoList:"todoList"},outputs:{deleteItem:"deleteItem",updateItem:"updateItem"},decls:14,vars:3,consts:[["mat-subheader",""],["name","todoFilter",3,"value","valueChange"],["value","all"],["value","active"],["value","complete"],[4,"ngFor","ngForOf"],[3,"todoItem","updateItem","deleteItem","statusChange"]],template:function(t,e){1&t&&(b.Sb(0,"mat-list"),b.Sb(1,"h2",0),b.sc(2,"TODO"),b.Rb(),b.Sb(3,"mat-button-toggle-group",1),b.ac("valueChange",(function(t){return e.filterTodos(t)})),b.Sb(4,"mat-button-toggle",2),b.sc(5,"All"),b.Rb(),b.Sb(6,"mat-button-toggle",3),b.sc(7,"Active"),b.Rb(),b.Sb(8,"mat-button-toggle",4),b.sc(9,"Complete"),b.Rb(),b.Rb(),b.rc(10,$,2,1,"ng-container",5),b.Ob(11,"mat-divider"),b.Sb(12,"div"),b.sc(13),b.Rb(),b.Rb()),2&t&&(b.Bb(3),b.fc("value",e.lastPlace),b.Bb(7),b.fc("ngForOf",e.listOfTodo),b.Bb(3),b.uc("Items left ",e.listOfTodo&&e.listOfTodo.length,""))},directives:[O.a,O.d,w.b,w.a,a.i,L.a,G],styles:[""]}),V);function q(t,e){if(1&t){var o=b.Tb();b.Sb(0,"button",10),b.ac("click",(function(){return b.kc(o),b.cc().openLoginDialog()})),b.Sb(1,"mat-icon"),b.sc(2,"input"),b.Rb(),b.sc(3," LOGIN "),b.Rb()}}function E(t,e){if(1&t){var o=b.Tb();b.Sb(0,"button",10),b.ac("click",(function(){return b.kc(o),b.cc().logout()})),b.Sb(1,"mat-icon"),b.sc(2,"output"),b.Rb(),b.Sb(3,"span"),b.sc(4,"LOGOUT"),b.Rb(),b.Rb()}}function H(t,e){if(1&t){var o=b.Tb();b.Sb(0,"button",10),b.ac("click",(function(){return b.kc(o),b.cc().openRegistrationDialog()})),b.Sb(1,"mat-icon"),b.sc(2,"create_new_folder"),b.Rb(),b.Sb(3,"span"),b.sc(4,"REGISTRATION"),b.Rb(),b.Rb()}}var A,K,J,W=[{path:"",component:(A=function(){function t(e,o,n,i){_classCallCheck(this,t),this.todoService=e,this.dialog=o,this.authService=n,this.toastrService=i,this.ngUnsubscribe$=new c.a,this.isUserLoggedIn=!1,this.selectedTabIndex=0}return _createClass(t,[{key:"ngOnInit",value:function(){this.getTodoList(),this.getUserInfo()}},{key:"getUserInfo",value:function(){var t=this;this.isUserLoggedIn=this.authService.isLoggedIn(),this.authService.currentUserSubject$.pipe(Object(u.a)(this.ngUnsubscribe$)).subscribe((function(e){e&&(t.userInfo=e,t.getUserTodo(e._id))}),(function(e){return t.toastrService.error(e.error)}))}},{key:"ngOnDestroy",value:function(){this.ngUnsubscribe$.next(),this.ngUnsubscribe$.complete()}},{key:"getUserTodo",value:function(t){var e=this;this.todoService.getTodoByUserId(t).pipe(Object(u.a)(this.ngUnsubscribe$)).subscribe((function(t){e.todoListPrivate=t,e.selectedTabIndex=1}),(function(t){return e.toastrService.error(t.error)}))}},{key:"getTodoList",value:function(){var t=this;this.todoService.getTodoList().pipe(Object(u.a)(this.ngUnsubscribe$)).subscribe((function(e){t.todoListGlobal=e,t.selectedTabIndex=0}),(function(e){return t.toastrService.error(e.error)}))}},{key:"postTodoFormValue",value:function(t){var e=this;this.todoService.postTodo(Object.assign(Object.assign({},t),{userId:this.userInfo?this.userInfo._id:void 0})).pipe(Object(u.a)(this.ngUnsubscribe$)).subscribe((function(t){e.userInfo?e.getUserTodo(e.userInfo._id):e.getTodoList(),e.toastrService.success("Add Success")}),(function(t){return e.toastrService.error(t.error)}))}},{key:"deleteTodo",value:function(t){var e=this;this.todoService.deleteTodo(t).pipe(Object(u.a)(this.ngUnsubscribe$)).subscribe((function(t){return e.userInfo?e.getUserTodo(e.userInfo._id):e.getTodoList()}),(function(t){return e.toastrService.error(t.error)}))}},{key:"updateTodo",value:function(t){var e=this;this.todoService.putTodo(t._id,t).pipe(Object(u.a)(this.ngUnsubscribe$)).subscribe((function(t){return e.userInfo?e.getUserTodo(e.userInfo._id):e.getTodoList()}),(function(t){return e.toastrService.error(t.error)}))}},{key:"openLoginDialog",value:function(){var t=this;this.dialog.open(g,{data:{buttonText:"Login"}}).beforeClosed().pipe(Object(u.a)(this.ngUnsubscribe$)).subscribe((function(e){return e&&t.login(e)}),(function(e){return t.toastrService.error(e.error)}))}},{key:"openRegistrationDialog",value:function(){var t=this;this.dialog.open(g,{data:{buttonText:"Registration"}}).beforeClosed().pipe(Object(u.a)(this.ngUnsubscribe$)).subscribe((function(e){return e&&t.registrationNewUser(e)}),(function(e){return t.toastrService.error(e.error)}))}},{key:"login",value:function(t){var e=this;this.authService.login(t).pipe(Object(u.a)(this.ngUnsubscribe$)).subscribe((function(o){o.error?e.toastrService.error(o.error):(e.isUserLoggedIn=t,e.toastrService.success("WELCOME USER"))}),(function(t){return e.toastrService.error(t.error)}))}},{key:"logout",value:function(){var t=this;this.authService.logout().pipe(Object(u.a)(this.ngUnsubscribe$)).subscribe((function(e){t.isUserLoggedIn=e,t.userInfo=null,t.selectedTabIndex=0,t.todoListPrivate=null}),(function(e){return t.toastrService.error(e.error)}))}},{key:"registrationNewUser",value:function(t){var e=this;this.authService.registrationNewUser(t).pipe(Object(u.a)(this.ngUnsubscribe$)).subscribe((function(t){return e.toastrService.success("Hello,now just login")}),(function(t){return e.toastrService.error(t.error)}))}}]),t}(),A.\u0275fac=function(t){return new(t||A)(b.Nb(I),b.Nb(l.b),b.Nb(S.a),b.Nb(k.b))},A.\u0275cmp=b.Hb({type:A,selectors:[["app-todo"]],decls:16,vars:9,consts:[[1,"flex-r"],["mat-mini-fab","","color","primary",1,"m-1",3,"matMenuTriggerFor"],["menu","matMenu"],["mat-menu-item","",3,"click",4,"ngIf"],[3,"sendFormValue"],[1,"w-80"],["mat-align-tabs","center",3,"selectedIndex","selectedIndexChange"],["label","Public Todo",3,"disabled"],[3,"todoList","deleteItem","updateItem"],["label","Private Todo",3,"disabled"],["mat-menu-item","",3,"click"]],template:function(t,e){if(1&t&&(b.Sb(0,"header",0),b.Sb(1,"button",1),b.Sb(2,"mat-icon"),b.sc(3,"menu"),b.Rb(),b.Rb(),b.Sb(4,"mat-menu",null,2),b.rc(6,q,4,0,"button",3),b.rc(7,E,5,0,"button",3),b.rc(8,H,5,0,"button",3),b.Rb(),b.Rb(),b.Sb(9,"app-todo-add",4),b.ac("sendFormValue",(function(t){return e.postTodoFormValue(t)})),b.Rb(),b.Sb(10,"div",5),b.Sb(11,"mat-tab-group",6),b.ac("selectedIndexChange",(function(t){return e.selectedTabIndex=t})),b.Sb(12,"mat-tab",7),b.Sb(13,"app-todo-list",8),b.ac("deleteItem",(function(t){return e.deleteTodo(t)}))("updateItem",(function(t){return e.updateTodo(t)})),b.Rb(),b.Rb(),b.Sb(14,"mat-tab",9),b.Sb(15,"app-todo-list",8),b.ac("deleteItem",(function(t){return e.deleteTodo(t)}))("updateItem",(function(t){return e.updateTodo(t)})),b.Rb(),b.Rb(),b.Rb(),b.Rb()),2&t){var o=b.jc(5);b.Bb(1),b.fc("matMenuTriggerFor",o),b.Bb(5),b.fc("ngIf",!e.isUserLoggedIn),b.Bb(1),b.fc("ngIf",e.isUserLoggedIn),b.Bb(1),b.fc("ngIf",!e.isUserLoggedIn),b.Bb(3),b.fc("selectedIndex",e.selectedTabIndex),b.Bb(1),b.fc("disabled",e.isUserLoggedIn),b.Bb(1),b.fc("todoList",e.todoListGlobal),b.Bb(1),b.fc("disabled",!e.isUserLoggedIn),b.Bb(1),b.fc("todoList",e.todoListPrivate)}},directives:[p.a,y.c,C.a,y.d,a.j,T,R.b,R.a,D,y.a],styles:["header[_ngcontent-%COMP%]{background:#000;opacity:.5}.flex-r[_ngcontent-%COMP%]{display:flex;justify-content:end}.w-80[_ngcontent-%COMP%]{width:80%;margin-left:auto;margin-right:auto}"]}),A)}],X=((K=function t(){_classCallCheck(this,t)}).\u0275mod=b.Lb({type:K}),K.\u0275inj=b.Kb({factory:function(t){return new(t||K)},imports:[[s.a.forChild(W)],s.a]}),K),Q=o("PCNd"),z=((J=function t(){_classCallCheck(this,t)}).\u0275mod=b.Lb({type:J}),J.\u0275inj=b.Kb({factory:function(t){return new(t||J)},imports:[[a.b,X,Q.a,d.j]]}),J)}}]);