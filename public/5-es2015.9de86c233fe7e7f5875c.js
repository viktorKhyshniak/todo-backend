(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{lCCV:function(t,e,o){"use strict";o.r(e),o.d(e,"TodoModule",(function(){return V}));var i=o("ofXK"),n=o("tyNb"),r=o("XNiG"),s=o("1G5W"),c=o("3Pt+"),a=o("0IaG"),d=o("fXoL"),b=o("kmnG"),u=o("qFsG"),l=o("bTqV");let m=(()=>{class t{constructor(t,e,o){this.fb=t,this.dialogRef=e,this.data=o,this.loginForm=this.fb.group({login:["",c.k.required],password:["",c.k.required]}),this.dialogData=this.data}onSubmit(t){this.dialogRef.close(t)}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)(d.Nb(c.b),d.Nb(a.d),d.Nb(a.a))},t.\u0275cmp=d.Hb({type:t,selectors:[["app-login-modal"]],decls:11,vars:3,consts:[[3,"formGroup","ngSubmit"],[1,"w-100"],["matInput","","placeholder","min 6","formControlName","login"],["matInput","","placeholder","min 6","formControlName","password"],["mat-flat-button","","color","primary","type","submit",3,"disabled"]],template:function(t,e){1&t&&(d.Sb(0,"form",0),d.ac("ngSubmit",(function(){return e.onSubmit(e.loginForm.value)})),d.Sb(1,"mat-form-field",1),d.Sb(2,"mat-label"),d.sc(3,"Login"),d.Rb(),d.Ob(4,"input",2),d.Rb(),d.Sb(5,"mat-form-field",1),d.Sb(6,"mat-label"),d.sc(7,"Password"),d.Rb(),d.Ob(8,"input",3),d.Rb(),d.Sb(9,"button",4),d.sc(10),d.Rb(),d.Rb()),2&t&&(d.fc("formGroup",e.loginForm),d.Bb(9),d.fc("disabled",e.loginForm.invalid),d.Bb(1),d.tc(e.dialogData.buttonText))},directives:[c.l,c.h,c.d,b.a,b.d,u.a,c.a,c.g,c.c,l.a],styles:["form[_ngcontent-%COMP%]{text-align:center}.w-100[_ngcontent-%COMP%]{width:100%}"]}),t})();var p=o("LzQu"),f=o("tk/3");let h=(()=>{class t{constructor(t){this.http=t}getTodoList(){return this.http.get(`${p.a.apiUrlConst}todo`)}postTodo(t){return this.http.post(`${p.a.apiUrlConst}todo`,t)}deleteTodo(t){return this.http.delete(`${p.a.apiUrlConst}todo/${t}`)}putTodo(t,e){return this.http.put(`${p.a.apiUrlConst}todo/${t}`,e)}getTodoByUserId(t){return this.http.get(`${p.a.apiUrlConst}todo/${t}`)}}return t.\u0275fac=function(e){return new(e||t)(d.Wb(f.b))},t.\u0275prov=d.Jb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var g=o("jGGy"),I=o("5eHb"),S=o("STbY"),v=o("NFeN");let T=(()=>{class t{constructor(t){this.fb=t,this.sendFormValue=new d.n,this.form=this.fb.group({todo:["",c.k.required]})}ngOnInit(){}submitTodoForm(){this.sendFormValue.emit(this.form.value),this.form.reset()}}return t.\u0275fac=function(e){return new(e||t)(d.Nb(c.b))},t.\u0275cmp=d.Hb({type:t,selectors:[["app-todo-add"]],outputs:{sendFormValue:"sendFormValue"},decls:8,vars:2,consts:[[3,"formGroup","ngSubmit"],["appearance","outline"],["matInput","","placeholder","Read Book","formControlName","todo"],["mat-mini-fab","","color","primary","type","submit",1,"m-1",3,"disabled"]],template:function(t,e){1&t&&(d.Sb(0,"form",0),d.ac("ngSubmit",(function(){return e.submitTodoForm()})),d.Sb(1,"mat-form-field",1),d.Sb(2,"mat-label"),d.sc(3,"Add Todos"),d.Rb(),d.Ob(4,"input",2),d.Rb(),d.Sb(5,"button",3),d.Sb(6,"small"),d.sc(7,"Submit"),d.Rb(),d.Rb(),d.Rb()),2&t&&(d.fc("formGroup",e.form),d.Bb(5),d.fc("disabled",e.form.invalid))},directives:[c.l,c.h,c.d,b.a,b.d,u.a,c.a,c.g,c.c,l.a],styles:["form[_ngcontent-%COMP%]{text-align:center}"]}),t})();var O=o("wZkO"),R=o("MutI"),L=o("f0Cb"),U=o("FKr1");function w(t,e){if(1&t&&(d.Sb(0,"div",4),d.Sb(1,"p"),d.sc(2),d.Rb(),d.Rb()),2&t){const t=d.cc();d.Bb(2),d.tc(t.todoItem.todo)}}function k(t,e){if(1&t&&(d.Sb(0,"form",5),d.Sb(1,"mat-form-field",6),d.Sb(2,"mat-label"),d.sc(3,"Edit Todo"),d.Rb(),d.Ob(4,"input",7),d.Rb(),d.Rb()),2&t){const t=d.cc();d.fc("formGroup",t.editForm)}}function y(t,e){if(1&t){const t=d.Tb();d.Sb(0,"button",12),d.ac("click",(function(){d.kc(t);const e=d.cc(2);return e.changeEditMode(e.todoItem)})),d.Sb(1,"mat-icon"),d.sc(2,"edit"),d.Rb(),d.Rb()}}function C(t,e){if(1&t){const t=d.Tb();d.Sb(0,"button",12),d.ac("click",(function(){return d.kc(t),d.cc(2).changeMode()})),d.Sb(1,"mat-icon"),d.sc(2,"keyboard_return"),d.Rb(),d.Rb()}}function M(t,e){if(1&t){const t=d.Tb();d.Sb(0,"button",13),d.ac("click",(function(){return d.kc(t),d.cc(2).editCurrentItem()})),d.Sb(1,"mat-icon"),d.sc(2,"save"),d.Rb(),d.Rb()}if(2&t){const t=d.cc(2);d.fc("disabled",t.editForm.invalid)}}function F(t,e){if(1&t){const t=d.Tb();d.Sb(0,"div",8),d.rc(1,y,3,0,"button",9),d.rc(2,C,3,0,"button",9),d.rc(3,M,3,1,"button",10),d.Sb(4,"button",11),d.ac("click",(function(){d.kc(t);const e=d.cc();return e.deleteCurrentItem(e.todoItem._id)})),d.Sb(5,"mat-icon"),d.sc(6,"delete"),d.Rb(),d.Rb(),d.Rb()}if(2&t){const t=d.cc();d.Bb(1),d.fc("ngIf",!t.editMode),d.Bb(1),d.fc("ngIf",t.editMode),d.Bb(1),d.fc("ngIf",t.editMode)}}let x=(()=>{class t{constructor(t){this.fb=t,this.isOptionActive=!1,this.deleteItem=new d.n,this.updateItem=new d.n,this.showOptions=!1,this.editMode=!1,this.editForm=this.fb.group({_id:[""],todo:["",c.k.required]})}ngOnInit(){}deleteCurrentItem(t){this.deleteItem.emit(t)}editCurrentItem(){this.updateItem.emit(this.editForm.value),this.changeMode()}changeEditMode(t){this.changeMode(),this.editForm.patchValue(t)}changeMode(){this.editMode=!this.editMode}}return t.\u0275fac=function(e){return new(e||t)(d.Nb(c.b))},t.\u0275cmp=d.Hb({type:t,selectors:[["app-todo-list-item"]],inputs:{todoItem:"todoItem",isOptionActive:"isOptionActive"},outputs:{deleteItem:"deleteItem",updateItem:"updateItem"},decls:5,vars:3,consts:[["matLine","",3,"mouseover","mouseleave"],["matLine","",4,"ngIf"],["matLine","",3,"formGroup",4,"ngIf"],["class","d-flex",4,"ngIf"],["matLine",""],["matLine","",3,"formGroup"],[1,"example-full-width"],["matInput","","placeholder","todo","formControlName","todo"],[1,"d-flex"],["mat-icon-button","","color","primary",3,"click",4,"ngIf"],["mat-icon-button","","color","primary",3,"disabled","click",4,"ngIf"],["mat-icon-button","","color","warn",3,"click"],["mat-icon-button","","color","primary",3,"click"],["mat-icon-button","","color","primary",3,"disabled","click"]],template:function(t,e){1&t&&(d.Sb(0,"mat-list-item",0),d.ac("mouseover",(function(){return e.showOptions=!0}))("mouseleave",(function(){return e.showOptions=!1})),d.rc(1,w,3,1,"div",1),d.rc(2,k,5,1,"form",2),d.rc(3,F,7,3,"div",3),d.Ob(4,"mat-divider"),d.Rb()),2&t&&(d.Bb(1),d.fc("ngIf",!e.editMode),d.Bb(1),d.fc("ngIf",e.editMode),d.Bb(1),d.fc("ngIf",e.isOptionActive&&e.showOptions))},directives:[R.b,U.e,i.j,L.a,c.l,c.h,c.d,b.a,b.d,u.a,c.a,c.g,c.c,l.a,v.a],styles:[".d-flex[_ngcontent-%COMP%]{display:flex}.mat-list-item[_ngcontent-%COMP%]{height:5rem}"]}),t})();function $(t,e){if(1&t){const t=d.Tb();d.Qb(0),d.Sb(1,"app-todo-list-item",2),d.ac("updateItem",(function(e){return d.kc(t),d.cc().update(e)}))("deleteItem",(function(e){return d.kc(t),d.cc().delete(e)})),d.Rb(),d.Pb()}if(2&t){const t=e.$implicit,o=d.cc();d.Bb(1),d.fc("todoItem",t)("isOptionActive",o.isOptionActive)}}let B=(()=>{class t{constructor(){this.deleteItem=new d.n,this.updateItem=new d.n}ngOnInit(){}delete(t){this.deleteItem.emit(t)}update(t){this.updateItem.emit(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=d.Hb({type:t,selectors:[["app-todo-list"]],inputs:{todoList:"todoList",isOptionActive:"isOptionActive"},outputs:{deleteItem:"deleteItem",updateItem:"updateItem"},decls:5,vars:1,consts:[["mat-subheader",""],[4,"ngFor","ngForOf"],[3,"todoItem","isOptionActive","updateItem","deleteItem"]],template:function(t,e){1&t&&(d.Sb(0,"mat-list"),d.Sb(1,"div",0),d.sc(2,"TODOS"),d.Rb(),d.rc(3,$,2,2,"ng-container",1),d.Ob(4,"mat-divider"),d.Rb()),2&t&&(d.Bb(3),d.fc("ngForOf",e.todoList))},directives:[R.a,R.d,i.i,L.a,x],styles:[""]}),t})();function N(t,e){if(1&t){const t=d.Tb();d.Sb(0,"button",10),d.ac("click",(function(){return d.kc(t),d.cc().openLoginDialog()})),d.Sb(1,"mat-icon"),d.sc(2,"input"),d.Rb(),d.sc(3," LOGIN "),d.Rb()}}function j(t,e){if(1&t){const t=d.Tb();d.Sb(0,"button",10),d.ac("click",(function(){return d.kc(t),d.cc().logout()})),d.Sb(1,"mat-icon"),d.sc(2,"output"),d.Rb(),d.Sb(3,"span"),d.sc(4,"LOGOUT"),d.Rb(),d.Rb()}}function G(t,e){if(1&t){const t=d.Tb();d.Sb(0,"button",10),d.ac("click",(function(){return d.kc(t),d.cc().openRegistrationDialog()})),d.Sb(1,"mat-icon"),d.sc(2,"create_new_folder"),d.Rb(),d.Sb(3,"span"),d.sc(4,"REGISTRATION"),d.Rb(),d.Rb()}}const _=[{path:"",component:(()=>{class t{constructor(t,e,o,i){this.todoService=t,this.dialog=e,this.authService=o,this.toastrService=i,this.ngUnsubscribe$=new r.a,this.isUserLoggedIn=!1,this.selectedTabIndex=0}ngOnInit(){this.getTodoList(),this.getUserInfo()}getUserInfo(){this.isUserLoggedIn=this.authService.isLoggedIn(),this.authService.currentUserSubject$.pipe(Object(s.a)(this.ngUnsubscribe$)).subscribe(t=>{t&&(this.userInfo=t,this.getUserTodo(t._id))},t=>this.toastrService.error(t.error))}ngOnDestroy(){this.ngUnsubscribe$.next(),this.ngUnsubscribe$.complete()}getUserTodo(t){this.todoService.getTodoByUserId(t).pipe(Object(s.a)(this.ngUnsubscribe$)).subscribe(t=>{this.todoListPrivate=t,this.selectedTabIndex=1},t=>this.toastrService.error(t.error))}getTodoList(){this.todoService.getTodoList().pipe(Object(s.a)(this.ngUnsubscribe$)).subscribe(t=>{this.todoListGlobal=t,this.selectedTabIndex=0},t=>this.toastrService.error(t.error))}postTodoFormValue(t){this.todoService.postTodo(Object.assign(Object.assign({},t),{userId:this.userInfo?this.userInfo._id:void 0})).pipe(Object(s.a)(this.ngUnsubscribe$)).subscribe(t=>{this.userInfo?this.getUserTodo(this.userInfo._id):this.getTodoList(),this.toastrService.success("Add Success")},t=>this.toastrService.error(t.error))}deleteTodo(t){this.todoService.deleteTodo(t).pipe(Object(s.a)(this.ngUnsubscribe$)).subscribe(t=>this.userInfo?this.getUserTodo(this.userInfo._id):this.getTodoList(),t=>this.toastrService.error(t.error))}updateTodo(t){this.todoService.putTodo(t._id,t).pipe(Object(s.a)(this.ngUnsubscribe$)).subscribe(t=>this.userInfo?this.getUserTodo(this.userInfo._id):this.getTodoList(),t=>this.toastrService.error(t.error))}openLoginDialog(){this.dialog.open(m,{data:{buttonText:"Login"}}).beforeClosed().pipe(Object(s.a)(this.ngUnsubscribe$)).subscribe(t=>t&&this.login(t),t=>this.toastrService.error(t.error))}openRegistrationDialog(){this.dialog.open(m,{data:{buttonText:"Registration"}}).beforeClosed().pipe(Object(s.a)(this.ngUnsubscribe$)).subscribe(t=>t&&this.registrationNewUser(t),t=>this.toastrService.error(t.error))}login(t){this.authService.login(t).pipe(Object(s.a)(this.ngUnsubscribe$)).subscribe(e=>{e.error?this.toastrService.error(e.error):(this.isUserLoggedIn=t,this.toastrService.success("WELCOME USER"))},t=>this.toastrService.error(t.error))}logout(){this.authService.logout().pipe(Object(s.a)(this.ngUnsubscribe$)).subscribe(t=>{this.isUserLoggedIn=t,this.userInfo=null,this.selectedTabIndex=0,this.todoListPrivate=null},t=>this.toastrService.error(t.error))}registrationNewUser(t){this.authService.registrationNewUser(t).pipe(Object(s.a)(this.ngUnsubscribe$)).subscribe(t=>this.toastrService.success(t),t=>this.toastrService.error(t.error))}}return t.\u0275fac=function(e){return new(e||t)(d.Nb(h),d.Nb(a.b),d.Nb(g.a),d.Nb(I.b))},t.\u0275cmp=d.Hb({type:t,selectors:[["app-todo"]],decls:16,vars:10,consts:[[1,"flex-r"],["mat-mini-fab","","color","primary",1,"m-1",3,"matMenuTriggerFor"],["menu","matMenu"],["mat-menu-item","",3,"click",4,"ngIf"],[3,"sendFormValue"],[1,"w-80"],["mat-align-tabs","center",3,"selectedIndex","selectedIndexChange"],["label","General Todo"],[3,"todoList","isOptionActive","deleteItem","updateItem"],["label","Private Todo",3,"disabled"],["mat-menu-item","",3,"click"]],template:function(t,e){if(1&t&&(d.Sb(0,"header",0),d.Sb(1,"button",1),d.Sb(2,"mat-icon"),d.sc(3,"menu"),d.Rb(),d.Rb(),d.Sb(4,"mat-menu",null,2),d.rc(6,N,4,0,"button",3),d.rc(7,j,5,0,"button",3),d.rc(8,G,5,0,"button",3),d.Rb(),d.Rb(),d.Sb(9,"app-todo-add",4),d.ac("sendFormValue",(function(t){return e.postTodoFormValue(t)})),d.Rb(),d.Sb(10,"div",5),d.Sb(11,"mat-tab-group",6),d.ac("selectedIndexChange",(function(t){return e.selectedTabIndex=t})),d.Sb(12,"mat-tab",7),d.Sb(13,"app-todo-list",8),d.ac("deleteItem",(function(t){return e.deleteTodo(t)}))("updateItem",(function(t){return e.updateTodo(t)})),d.Rb(),d.Rb(),d.Sb(14,"mat-tab",9),d.Sb(15,"app-todo-list",8),d.ac("deleteItem",(function(t){return e.deleteTodo(t)}))("updateItem",(function(t){return e.updateTodo(t)})),d.Rb(),d.Rb(),d.Rb(),d.Rb()),2&t){const t=d.jc(5);d.Bb(1),d.fc("matMenuTriggerFor",t),d.Bb(5),d.fc("ngIf",!e.isUserLoggedIn),d.Bb(1),d.fc("ngIf",e.isUserLoggedIn),d.Bb(1),d.fc("ngIf",!e.isUserLoggedIn),d.Bb(3),d.fc("selectedIndex",e.selectedTabIndex),d.Bb(2),d.fc("todoList",e.todoListGlobal)("isOptionActive",!1),d.Bb(1),d.fc("disabled",!e.isUserLoggedIn),d.Bb(1),d.fc("todoList",e.todoListPrivate)("isOptionActive",!0)}},directives:[l.a,S.c,v.a,S.d,i.j,T,O.b,O.a,B,S.a],styles:["header[_ngcontent-%COMP%]{background:#000;opacity:.5}.flex-r[_ngcontent-%COMP%]{display:flex;justify-content:end}.w-80[_ngcontent-%COMP%]{width:80%;margin-left:auto;margin-right:auto}"]}),t})()}];let P=(()=>{class t{}return t.\u0275mod=d.Lb({type:t}),t.\u0275inj=d.Kb({factory:function(e){return new(e||t)},imports:[[n.a.forChild(_)],n.a]}),t})();var A=o("PCNd");let V=(()=>{class t{}return t.\u0275mod=d.Lb({type:t}),t.\u0275inj=d.Kb({factory:function(e){return new(e||t)},imports:[[i.b,P,A.a,c.j]]}),t})()}}]);