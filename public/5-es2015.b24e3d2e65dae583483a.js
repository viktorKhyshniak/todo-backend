(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{lCCV:function(t,e,o){"use strict";o.r(e),o.d(e,"TodoModule",(function(){return E}));var i=o("ofXK"),s=o("tyNb"),n=o("XNiG"),r=o("1G5W"),c=o("3Pt+"),a=o("0IaG"),d=o("fXoL"),u=o("kmnG"),b=o("qFsG"),l=o("bTqV");let m=(()=>{class t{constructor(t,e,o){this.fb=t,this.dialogRef=e,this.data=o,this.loginForm=this.fb.group({login:["",c.k.required],password:["",c.k.required]}),this.dialogData=this.data}onSubmit(t){this.dialogRef.close(t)}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)(d.Nb(c.b),d.Nb(a.d),d.Nb(a.a))},t.\u0275cmp=d.Hb({type:t,selectors:[["app-login-modal"]],decls:11,vars:4,consts:[[3,"formGroup","ngSubmit"],[1,"w-100"],["matInput","","placeholder","min 6","formControlName","login"],["matInput","","placeholder","min 6","type","password","formControlName","password"],["mat-flat-button","","color","primary","type","submit",3,"disabled"]],template:function(t,e){1&t&&(d.Sb(0,"form",0),d.ac("ngSubmit",(function(){return e.onSubmit(e.loginForm.value)})),d.Sb(1,"mat-form-field",1),d.Sb(2,"mat-label"),d.sc(3),d.Rb(),d.Ob(4,"input",2),d.Rb(),d.Sb(5,"mat-form-field",1),d.Sb(6,"mat-label"),d.sc(7,"Password"),d.Rb(),d.Ob(8,"input",3),d.Rb(),d.Sb(9,"button",4),d.sc(10),d.Rb(),d.Rb()),2&t&&(d.fc("formGroup",e.loginForm),d.Bb(3),d.tc(e.dialogData.buttonText),d.Bb(6),d.fc("disabled",e.loginForm.invalid),d.Bb(1),d.uc(" ",e.dialogData.buttonText," "))},directives:[c.l,c.h,c.d,u.a,u.d,b.a,c.a,c.g,c.c,l.a],styles:["form[_ngcontent-%COMP%]{text-align:center}"]}),t})();var f=o("LzQu"),h=o("tk/3");let g=(()=>{class t{constructor(t){this.http=t}getTodoList(){return this.http.get(`${f.a.apiUrlConst}todo`)}postTodo(t){return this.http.post(`${f.a.apiUrlConst}todo`,t)}deleteTodo(t){return this.http.delete(`${f.a.apiUrlConst}todo/${t}`)}putTodo(t,e){return this.http.put(`${f.a.apiUrlConst}todo/${t}`,e)}getTodoByUserId(t){return this.http.get(`${f.a.apiUrlConst}todo/${t}`)}}return t.\u0275fac=function(e){return new(e||t)(d.Wb(h.b))},t.\u0275prov=d.Jb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var p=o("jGGy"),I=o("5eHb"),S=o("STbY"),v=o("NFeN");let T=(()=>{class t{constructor(t){this.fb=t,this.sendFormValue=new d.n,this.form=this.fb.group({todo:[""],status:["active"]})}ngOnInit(){this.initForm()}submitTodoForm(){this.sendFormValue.emit(this.form.value),this.initForm()}initForm(){this.form=this.fb.group({todo:[""],status:["active"]})}}return t.\u0275fac=function(e){return new(e||t)(d.Nb(c.b))},t.\u0275cmp=d.Hb({type:t,selectors:[["app-todo-add"]],outputs:{sendFormValue:"sendFormValue"},decls:8,vars:2,consts:[[3,"formGroup","ngSubmit"],["appearance","outline"],["matInput","","placeholder","Read Book","formControlName","todo"],["mat-raised-button","","color","primary",1,"m-1",3,"disabled"]],template:function(t,e){1&t&&(d.Sb(0,"form",0),d.ac("ngSubmit",(function(){return e.submitTodoForm()})),d.Sb(1,"mat-form-field",1),d.Sb(2,"mat-label"),d.sc(3,"Add Todos"),d.Rb(),d.Ob(4,"input",2),d.Rb(),d.Sb(5,"button",3),d.Sb(6,"small"),d.sc(7,"Submit"),d.Rb(),d.Rb(),d.Rb()),2&t&&(d.fc("formGroup",e.form),d.Bb(5),d.fc("disabled",e.form.controls.todo.value&&0===e.form.controls.todo.value.length))},directives:[c.l,c.h,c.d,u.a,u.d,b.a,c.a,c.g,c.c,l.a],styles:["form[_ngcontent-%COMP%]{text-align:center}"]}),t})();var R=o("wZkO"),O=o("MutI"),w=o("jaxi"),k=o("f0Cb"),C=o("FKr1");function L(t,e){1&t&&(d.Sb(0,"mat-icon"),d.sc(1,"done_outline"),d.Rb())}function U(t,e){if(1&t&&(d.Sb(0,"div",5),d.Sb(1,"span",6),d.rc(2,L,2,0,"mat-icon",7),d.Rb(),d.Sb(3,"span",8),d.sc(4),d.Rb(),d.Rb()),2&t){const t=d.cc();d.Bb(2),d.fc("ngIf",(null==t.todoItem?null:t.todoItem.status)===(null==t.statusConst?null:t.statusConst.complete)),d.Bb(2),d.tc(t.todoItem.todo)}}function y(t,e){if(1&t){const t=d.Tb();d.Sb(0,"form",9),d.ac("click",(function(e){return d.kc(t),d.cc().formChange(e)}))("change",(function(e){return d.kc(t),d.cc().formChange(e)})),d.Sb(1,"mat-form-field",10),d.Sb(2,"mat-label"),d.sc(3,"Edit Todo"),d.Rb(),d.Ob(4,"input",11),d.Rb(),d.Rb()}if(2&t){const t=d.cc();d.fc("formGroup",t.editForm)}}function M(t,e){if(1&t){const t=d.Tb();d.Sb(0,"button",16),d.ac("click",(function(e){d.kc(t);const o=d.cc(2);return o.changeEditMode(e,o.todoItem)})),d.Sb(1,"mat-icon"),d.sc(2,"edit"),d.Rb(),d.Rb()}}function F(t,e){if(1&t){const t=d.Tb();d.Sb(0,"button",16),d.ac("click",(function(e){d.kc(t);const o=d.cc(2);return o.editMode=o.changeMode(e,o.editMode)})),d.Sb(1,"mat-icon"),d.sc(2,"keyboard_return"),d.Rb(),d.Rb()}}function x(t,e){if(1&t){const t=d.Tb();d.Sb(0,"button",17),d.ac("click",(function(e){d.kc(t);const o=d.cc(2);return o.editCurrentItem(e,o.editForm.value)})),d.Sb(1,"mat-icon"),d.sc(2,"save"),d.Rb(),d.Rb()}if(2&t){const t=d.cc(2);d.fc("disabled",t.editForm.invalid)}}function j(t,e){if(1&t){const t=d.Tb();d.Sb(0,"div",12),d.rc(1,M,3,0,"button",13),d.rc(2,F,3,0,"button",13),d.rc(3,x,3,1,"button",14),d.Sb(4,"button",15),d.ac("click",(function(e){d.kc(t);const o=d.cc();return o.deleteCurrentItem(e,o.todoItem._id)})),d.Sb(5,"mat-icon"),d.sc(6,"delete"),d.Rb(),d.Rb(),d.Rb()}if(2&t){const t=d.cc();d.Bb(1),d.fc("ngIf",!t.editMode),d.Bb(1),d.fc("ngIf",t.editMode),d.Bb(1),d.fc("ngIf",t.editMode)}}let B=(()=>{class t{constructor(t){this.fb=t,this.deleteItem=new d.n,this.updateItem=new d.n,this.statusChange=new d.n,this.showOptions=!1,this.editMode=!1,this.editForm=this.fb.group({_id:[""],status:["active",c.k.required],todo:["",c.k.required]}),this.statusConst=f.a.todoStatuses}ngOnInit(){this.initForm()}initForm(){this.editForm=this.fb.group({_id:[""],status:["active",c.k.required],todo:["",c.k.required]})}deleteCurrentItem(t,e){t.stopPropagation(),this.deleteItem.emit(e)}editCurrentItem(t,e){t.stopPropagation(),this.updateItem.emit(e),this.editMode=this.editMode?this.changeMode(t,this.editMode):this.editMode}changeEditMode(t,e){t.stopPropagation(),this.editMode=this.changeMode(t,this.editMode),this.editForm.patchValue(e)}changeMode(t,e){return t.stopPropagation(),!e}changeStatus(t,e){let o;switch(e){case f.a.todoStatuses.active:o=f.a.todoStatuses.complete;break;case f.a.todoStatuses.complete:o=f.a.todoStatuses.active;break;default:o=f.a.todoStatuses.complete}this.todoItem=Object.assign(Object.assign({},this.todoItem),{status:o}),this.editCurrentItem(t,this.todoItem),this.statusChange.emit()}formChange(t){t.stopPropagation()}}return t.\u0275fac=function(e){return new(e||t)(d.Nb(c.b))},t.\u0275cmp=d.Hb({type:t,selectors:[["app-todo-list-item"]],inputs:{todoItem:"todoItem"},outputs:{deleteItem:"deleteItem",updateItem:"updateItem",statusChange:"statusChange"},decls:6,vars:3,consts:[["matLine","",3,"mouseover","mouseleave","click"],["matLine","","class","d-flex w-50",4,"ngIf"],["matLine","","class","d-flex w-50 end",3,"formGroup","click","change",4,"ngIf"],[1,"w-50"],["class","d-flex end",4,"ngIf"],["matLine","",1,"d-flex","w-50"],[1,"green"],[4,"ngIf"],[1,"todo-name","w-50"],["matLine","",1,"d-flex","w-50","end",3,"formGroup","click","change"],[1,"example-full-width"],["matInput","","placeholder","todo","formControlName","todo"],[1,"d-flex","end"],["mat-icon-button","","color","primary",3,"click",4,"ngIf"],["mat-icon-button","","color","primary",3,"disabled","click",4,"ngIf"],["mat-icon-button","","color","warn",3,"click"],["mat-icon-button","","color","primary",3,"click"],["mat-icon-button","","color","primary",3,"disabled","click"]],template:function(t,e){1&t&&(d.Sb(0,"mat-list-item",0),d.ac("mouseover",(function(){return e.showOptions=!0}))("mouseleave",(function(){return e.showOptions=!1}))("click",(function(t){return e.changeStatus(t,e.todoItem.status)})),d.rc(1,U,5,2,"div",1),d.rc(2,y,5,1,"form",2),d.Sb(3,"div",3),d.rc(4,j,7,3,"div",4),d.Rb(),d.Ob(5,"mat-divider"),d.Rb()),2&t&&(d.Bb(1),d.fc("ngIf",!e.editMode),d.Bb(1),d.fc("ngIf",e.editMode),d.Bb(2),d.fc("ngIf",e.showOptions))},directives:[O.b,C.e,i.j,k.a,v.a,c.l,c.h,c.d,u.a,u.d,b.a,c.a,c.g,c.c,l.a],styles:[".d-flex[_ngcontent-%COMP%]{display:flex!important;justify-content:space-between}.end[_ngcontent-%COMP%]{justify-content:flex-end!important}.mat-list-item[_ngcontent-%COMP%]{height:5rem}.green[_ngcontent-%COMP%]{color:#adff2f}.todo-name[_ngcontent-%COMP%]{align-self:center}"]}),t})();function P(t,e){if(1&t){const t=d.Tb();d.Qb(0),d.Sb(1,"app-todo-list-item",6),d.ac("updateItem",(function(e){return d.kc(t),d.cc().update(e)}))("deleteItem",(function(e){return d.kc(t),d.cc().delete(e)}))("statusChange",(function(e){return d.kc(t),d.cc().filterTodos(e)})),d.Rb(),d.Pb()}if(2&t){const t=e.$implicit;d.Bb(1),d.fc("todoItem",t)}}let $=(()=>{class t{constructor(){this.deleteItem=new d.n,this.updateItem=new d.n,this.lastPlace="all"}set todoList(t){t&&(this.allTodo=t,this.filterTodos())}ngOnInit(){}delete(t){this.deleteItem.emit(t)}update(t){this.updateItem.emit(t)}filterTodos(t){const e=t?t.toString():this.lastPlace;switch(e){case f.a.todoStatuses.active:case f.a.todoStatuses.complete:this.listOfTodo=this.allTodo.filter(t=>t.status===e);break;default:this.listOfTodo=this.allTodo}this.lastPlace=e}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=d.Hb({type:t,selectors:[["app-todo-list"]],inputs:{todoList:"todoList"},outputs:{deleteItem:"deleteItem",updateItem:"updateItem"},decls:14,vars:3,consts:[["mat-subheader",""],["name","todoFilter",3,"value","valueChange"],["value","all"],["value","active"],["value","complete"],[4,"ngFor","ngForOf"],[3,"todoItem","updateItem","deleteItem","statusChange"]],template:function(t,e){1&t&&(d.Sb(0,"mat-list"),d.Sb(1,"h2",0),d.sc(2,"TODO"),d.Rb(),d.Sb(3,"mat-button-toggle-group",1),d.ac("valueChange",(function(t){return e.filterTodos(t)})),d.Sb(4,"mat-button-toggle",2),d.sc(5,"All"),d.Rb(),d.Sb(6,"mat-button-toggle",3),d.sc(7,"Active"),d.Rb(),d.Sb(8,"mat-button-toggle",4),d.sc(9,"Complete"),d.Rb(),d.Rb(),d.rc(10,P,2,1,"ng-container",5),d.Ob(11,"mat-divider"),d.Sb(12,"div"),d.sc(13),d.Rb(),d.Rb()),2&t&&(d.Bb(3),d.fc("value",e.lastPlace),d.Bb(7),d.fc("ngForOf",e.listOfTodo),d.Bb(3),d.uc("Items left ",e.listOfTodo&&e.listOfTodo.length,""))},directives:[O.a,O.d,w.b,w.a,i.i,k.a,B],styles:[""]}),t})();function N(t,e){if(1&t){const t=d.Tb();d.Sb(0,"button",10),d.ac("click",(function(){return d.kc(t),d.cc().openLoginDialog()})),d.Sb(1,"mat-icon"),d.sc(2,"input"),d.Rb(),d.sc(3," LOGIN "),d.Rb()}}function _(t,e){if(1&t){const t=d.Tb();d.Sb(0,"button",10),d.ac("click",(function(){return d.kc(t),d.cc().logout()})),d.Sb(1,"mat-icon"),d.sc(2,"output"),d.Rb(),d.Sb(3,"span"),d.sc(4,"LOGOUT"),d.Rb(),d.Rb()}}function G(t,e){if(1&t){const t=d.Tb();d.Sb(0,"button",10),d.ac("click",(function(){return d.kc(t),d.cc().openRegistrationDialog()})),d.Sb(1,"mat-icon"),d.sc(2,"create_new_folder"),d.Rb(),d.Sb(3,"span"),d.sc(4,"REGISTRATION"),d.Rb(),d.Rb()}}const V=[{path:"",component:(()=>{class t{constructor(t,e,o,i){this.todoService=t,this.dialog=e,this.authService=o,this.toastrService=i,this.ngUnsubscribe$=new n.a,this.isUserLoggedIn=!1,this.selectedTabIndex=0}ngOnInit(){this.getTodoList(),this.getUserInfo()}getUserInfo(){this.isUserLoggedIn=this.authService.isLoggedIn(),this.authService.currentUserSubject$.pipe(Object(r.a)(this.ngUnsubscribe$)).subscribe(t=>{t&&(this.userInfo=t,this.getUserTodo(t._id))},t=>this.toastrService.error(t.error))}ngOnDestroy(){this.ngUnsubscribe$.next(),this.ngUnsubscribe$.complete()}getUserTodo(t){this.todoService.getTodoByUserId(t).pipe(Object(r.a)(this.ngUnsubscribe$)).subscribe(t=>{this.todoListPrivate=t,this.selectedTabIndex=1},t=>this.toastrService.error(t.error))}getTodoList(){this.todoService.getTodoList().pipe(Object(r.a)(this.ngUnsubscribe$)).subscribe(t=>{this.todoListGlobal=t,this.selectedTabIndex=0},t=>this.toastrService.error(t.error))}postTodoFormValue(t){this.todoService.postTodo(Object.assign(Object.assign({},t),{userId:this.userInfo?this.userInfo._id:void 0})).pipe(Object(r.a)(this.ngUnsubscribe$)).subscribe(t=>{this.userInfo?this.getUserTodo(this.userInfo._id):this.getTodoList(),this.toastrService.success("Add Success")},t=>this.toastrService.error(t.error))}deleteTodo(t){this.todoService.deleteTodo(t).pipe(Object(r.a)(this.ngUnsubscribe$)).subscribe(t=>this.userInfo?this.getUserTodo(this.userInfo._id):this.getTodoList(),t=>this.toastrService.error(t.error))}updateTodo(t){this.todoService.putTodo(t._id,t).pipe(Object(r.a)(this.ngUnsubscribe$)).subscribe(t=>this.userInfo?this.getUserTodo(this.userInfo._id):this.getTodoList(),t=>this.toastrService.error(t.error))}openLoginDialog(){this.dialog.open(m,{data:{buttonText:"Login"}}).beforeClosed().pipe(Object(r.a)(this.ngUnsubscribe$)).subscribe(t=>t&&this.login(t),t=>this.toastrService.error(t.error))}openRegistrationDialog(){this.dialog.open(m,{data:{buttonText:"Registration"}}).beforeClosed().pipe(Object(r.a)(this.ngUnsubscribe$)).subscribe(t=>t&&this.registrationNewUser(t),t=>this.toastrService.error(t.error))}login(t){this.authService.login(t).pipe(Object(r.a)(this.ngUnsubscribe$)).subscribe(e=>{e.error?this.toastrService.error(e.error):(this.isUserLoggedIn=t,this.toastrService.success("WELCOME USER"))},t=>this.toastrService.error(t.error))}logout(){this.authService.logout().pipe(Object(r.a)(this.ngUnsubscribe$)).subscribe(t=>{this.isUserLoggedIn=t,this.userInfo=null,this.selectedTabIndex=0,this.todoListPrivate=null},t=>this.toastrService.error(t.error))}registrationNewUser(t){this.authService.registrationNewUser(t).pipe(Object(r.a)(this.ngUnsubscribe$)).subscribe(t=>this.toastrService.success("Hello,now just login"),t=>this.toastrService.error(t.error))}}return t.\u0275fac=function(e){return new(e||t)(d.Nb(g),d.Nb(a.b),d.Nb(p.a),d.Nb(I.b))},t.\u0275cmp=d.Hb({type:t,selectors:[["app-todo"]],decls:16,vars:9,consts:[[1,"flex-r"],["mat-mini-fab","","color","primary",1,"m-1",3,"matMenuTriggerFor"],["menu","matMenu"],["mat-menu-item","",3,"click",4,"ngIf"],[3,"sendFormValue"],[1,"w-80"],["mat-align-tabs","center",3,"selectedIndex","selectedIndexChange"],["label","Public Todo",3,"disabled"],[3,"todoList","deleteItem","updateItem"],["label","Private Todo",3,"disabled"],["mat-menu-item","",3,"click"]],template:function(t,e){if(1&t&&(d.Sb(0,"header",0),d.Sb(1,"button",1),d.Sb(2,"mat-icon"),d.sc(3,"menu"),d.Rb(),d.Rb(),d.Sb(4,"mat-menu",null,2),d.rc(6,N,4,0,"button",3),d.rc(7,_,5,0,"button",3),d.rc(8,G,5,0,"button",3),d.Rb(),d.Rb(),d.Sb(9,"app-todo-add",4),d.ac("sendFormValue",(function(t){return e.postTodoFormValue(t)})),d.Rb(),d.Sb(10,"div",5),d.Sb(11,"mat-tab-group",6),d.ac("selectedIndexChange",(function(t){return e.selectedTabIndex=t})),d.Sb(12,"mat-tab",7),d.Sb(13,"app-todo-list",8),d.ac("deleteItem",(function(t){return e.deleteTodo(t)}))("updateItem",(function(t){return e.updateTodo(t)})),d.Rb(),d.Rb(),d.Sb(14,"mat-tab",9),d.Sb(15,"app-todo-list",8),d.ac("deleteItem",(function(t){return e.deleteTodo(t)}))("updateItem",(function(t){return e.updateTodo(t)})),d.Rb(),d.Rb(),d.Rb(),d.Rb()),2&t){const t=d.jc(5);d.Bb(1),d.fc("matMenuTriggerFor",t),d.Bb(5),d.fc("ngIf",!e.isUserLoggedIn),d.Bb(1),d.fc("ngIf",e.isUserLoggedIn),d.Bb(1),d.fc("ngIf",!e.isUserLoggedIn),d.Bb(3),d.fc("selectedIndex",e.selectedTabIndex),d.Bb(1),d.fc("disabled",e.isUserLoggedIn),d.Bb(1),d.fc("todoList",e.todoListGlobal),d.Bb(1),d.fc("disabled",!e.isUserLoggedIn),d.Bb(1),d.fc("todoList",e.todoListPrivate)}},directives:[l.a,S.c,v.a,S.d,i.j,T,R.b,R.a,$,S.a],styles:["header[_ngcontent-%COMP%]{background:#000;opacity:.5}.flex-r[_ngcontent-%COMP%]{display:flex;justify-content:end}.w-80[_ngcontent-%COMP%]{width:80%;margin-left:auto;margin-right:auto}"]}),t})()}];let D=(()=>{class t{}return t.\u0275mod=d.Lb({type:t}),t.\u0275inj=d.Kb({factory:function(e){return new(e||t)},imports:[[s.a.forChild(V)],s.a]}),t})();var q=o("PCNd");let E=(()=>{class t{}return t.\u0275mod=d.Lb({type:t}),t.\u0275inj=d.Kb({factory:function(e){return new(e||t)},imports:[[i.b,D,q.a,c.j]]}),t})()}}]);